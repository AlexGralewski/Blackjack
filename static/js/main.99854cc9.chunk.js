(this.webpackJsonpblackjack=this.webpackJsonpblackjack||[]).push([[0],{28:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),r=n(16),o=n.n(r),l=(n(28),n(10)),d=n(17),i=n(18),u=n(19),j=n(8),b=n(22),h=n(21),m=n(2),x=n(3);var O=function(){return Object(a.jsx)("footer",{children:"Created by Aleksander Gralewski"})};var p=function(e){var t=e.resetGameState,n=e.loadSaves,s=e.loadScoreboard;return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)("div",{className:"menu-title",children:"Blackjack"}),Object(a.jsx)(m.b,{to:"/username",onClick:function(){t()},children:Object(a.jsx)("button",{className:"menu-item new-game",children:"New Game"})}),Object(a.jsx)(m.b,{to:"/loadgame",onClick:function(){n()},children:Object(a.jsx)("button",{className:"menu-item",children:"Load Game"})}),Object(a.jsx)(m.b,{to:"/highscores",onClick:function(){s()},children:Object(a.jsx)("button",{className:"menu-item",children:"High Scores"})}),Object(a.jsx)(m.b,{to:"/rules",children:Object(a.jsx)("button",{className:"menu-item",children:"Rules"})}),Object(a.jsx)(m.b,{to:"/credits",children:Object(a.jsx)("button",{className:"menu-item",children:"Credits"})}),Object(a.jsx)("button",{className:"reset-game",onClick:function(){localStorage.clear()},children:"Reset Game"}),Object(a.jsx)(O,{})]})};var v=function(e){var t=e.changeBet,n=e.confirmBet,s=e.bet,c=e.balance,r=e.saveGame,o=e.roundCount;return Object(a.jsxs)("div",{className:"bet-selection",children:[Object(a.jsx)("h1",{children:"BET"}),Object(a.jsxs)("div",{className:"bet-buttons",children:[Object(a.jsx)("input",{type:"button",name:"bet",value:"5",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:"10",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:"25",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:"50",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:"100",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:"500",onClick:t}),Object(a.jsx)("input",{type:"button",name:"bet",value:c,onClick:t})]}),Object(a.jsxs)("div",{className:"custom-bet",children:[Object(a.jsx)("label",{children:"Custom Bet"}),Object(a.jsx)("input",{type:"number",name:"bet",step:"5",value:s,min:"0",max:c,onChange:t})]}),Object(a.jsxs)("div",{className:"bet-balance-information",children:[Object(a.jsxs)("p",{children:["Your bet: ",c>=s&&s>=0?"".concat(s,"$"):"Invalid bet"]}),Object(a.jsxs)("p",{children:["Possible winnings: ",c>=s&&s>=0?"".concat(2.5*s,"$"):"Invalid bet"]}),Object(a.jsxs)("p",{children:["Your balance: ",c,"$"]}),Object(a.jsxs)("p",{children:["Balance after bet: ",c>=s&&s>=0?"".concat(c-s,"$"):"Invalid bet"]})]}),Object(a.jsxs)("div",{className:"bet-link-buttons",children:[Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Quit"})}),Object(a.jsx)(m.b,{to:"/",onClick:function(){return r()},style:o>1?{display:"flex"}:{display:"none"},children:Object(a.jsx)("button",{children:"Save and Quit"})}),Object(a.jsx)(m.b,{to:"/game",style:s>0&&c>=s?{display:"flex"}:{display:"none"},children:Object(a.jsx)("button",{onClick:n,children:"Confirm"})})]})]})};var f=function(e){return Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("img",{src:e.card,alt:"card"})})};var y=function(e){var t=e.saveGame,n=e.nextRound,s=e.endGamePopup,c=e.endRoundPopup,r=e.bet,o=e.stake,l=e.balance,d=e.dealerPoints,i=e.username,u=e.playerPoints,j=e.hit,b=e.playerHand,h=e.dealerHand,x=e.roundCount,O=e.doubledown,p=e.stand,v=e.roundResult,y=e.roundHistory,N=e.saveGameScore,C=e.resetGameState;return Object(a.jsxs)("div",{className:"game",children:[Object(a.jsxs)("div",{className:"game-table",children:[Object(a.jsxs)("div",{className:"dealer-side",children:[Object(a.jsxs)("div",{className:"name-points",children:[Object(a.jsx)("div",{className:"name",children:"Dealer"}),Object(a.jsx)("div",{className:"points",children:d})]}),Object(a.jsx)("div",{className:"hand",children:h.map((function(e,t){return Object(a.jsx)(f,{card:e},t)}))})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"neutral",children:[Object(a.jsxs)("div",{className:"values-info",children:[Object(a.jsxs)("p",{children:["Round: ",x,"/5"]}),Object(a.jsxs)("p",{children:["Bet: ",r]}),Object(a.jsxs)("p",{children:["Stake: ",o," "]}),Object(a.jsxs)("p",{children:["Balance: ",l]})]}),Object(a.jsxs)("div",{className:"table-buttons",children:[Object(a.jsx)(m.b,{to:"/roundhistory",onClick:function(){console.log(y)},children:Object(a.jsx)("button",{children:"Round history"})}),Object(a.jsx)(m.b,{to:"/",onClick:function(){t()},style:0===l?{display:"none"}:{display:"flex"},children:Object(a.jsx)("button",{children:"Save and Quit"})}),Object(a.jsx)(m.b,{to:"/",onClick:function(){C()},children:Object(a.jsx)("button",{children:"Quit"})})]}),Object(a.jsxs)("div",{className:"deck",children:[Object(a.jsx)("div",{className:"card card1 reversed"}),Object(a.jsx)("div",{className:"card card2 reversed"}),Object(a.jsx)("div",{className:"card card3 reversed"})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"player-side",children:[Object(a.jsxs)("div",{className:"name-points",children:[Object(a.jsx)("div",{className:"name",children:i}),Object(a.jsx)("div",{className:"points",children:u})]}),Object(a.jsx)("div",{className:"hand",children:b.map((function(e,t){return Object(a.jsx)(f,{card:e},t)}))})]})]}),Object(a.jsxs)("div",{className:"hit-stand-double-buttons",children:[Object(a.jsx)("input",{type:"button",value:"Hit",onClick:function(){j()},style:u>=21?{display:"none"}:{display:"block"}}),Object(a.jsx)("input",{type:"button",value:"Double Down",style:u>=21||l<r?{display:"none"}:{display:"block"},onClick:function(){O()}}),Object(a.jsx)("input",{type:"button",value:"Stand",onClick:function(){p()}})]}),Object(a.jsxs)("div",{className:"popup",style:{display:c},children:["You ",v," round ",x,Object(a.jsx)("div",{className:"end-round-buttons",children:Object(a.jsx)(m.b,{to:"/betselection",onClick:n,children:Object(a.jsx)("button",{children:"Next Round"})})})]}),Object(a.jsxs)("div",{className:"popup",style:{display:s},children:["Game Over",Object(a.jsxs)("div",{className:"end-game-buttons",children:[Object(a.jsx)(m.b,{to:"/",onClick:N,children:Object(a.jsx)("button",{children:"Save score and quit"})}),Object(a.jsx)(m.b,{to:"/",onClick:function(){C()},children:Object(a.jsx)("button",{children:"Quit"})})]})]})]})};var N=function(e){var t=e.saves,n=e.loadChosenSave;return Object(a.jsxs)("div",{className:"saves",children:[Object(a.jsx)("h1",{children:"Saves"}),Object(a.jsx)("div",{className:"saves-list",children:null===t||t===[]?"no saves yet":t.map((function(e,t){return Object(a.jsxs)("div",{className:"save",children:[Object(a.jsx)("div",{className:"save-id",children:t+1}),Object(a.jsxs)("div",{className:"save-text",children:[Object(a.jsx)("div",{className:"save-username",children:e.username}),Object(a.jsxs)("div",{className:"save-round",children:["Round: ",e.round,"/5"]}),Object(a.jsxs)("div",{className:"save-balance",children:["Balance: ",e.balance]})]}),Object(a.jsx)(m.b,{to:"/betselection",onClick:function(){n(t)},children:Object(a.jsx)("button",{children:"Load"})})]})}))}),Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Back"})})]})};var C=function(){return Object(a.jsxs)("div",{className:"rules",children:[Object(a.jsx)("h1",{children:"Rules"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Single player vs automated dealer"}),Object(a.jsx)("li",{children:"Decks used: 6"}),Object(a.jsx)("li",{children:"Starting balance: 1000$"}),Object(a.jsx)("li",{children:"Game length: 5 rounds (or loss of all the funds)"}),Object(a.jsx)("li",{children:"Dealer will stand if he has more points than 17 or the player"}),Object(a.jsx)("li",{children:"Ace is counted as 1 or 11 depending what is better for the player"}),Object(a.jsx)("li",{children:"Round possible winnings are always 1.5x bet"}),Object(a.jsx)("li",{children:"Game actions: hit - draw another card, double down - draw just one more card and stand, stand - wait for dealers turn"})]}),Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Back"})}),Object(a.jsx)(O,{})]})};var S=function(e){return Object(a.jsxs)("div",{className:"credits",children:[Object(a.jsx)("h1",{children:"Credits"}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:["Deck of cards API: ",Object(a.jsx)("a",{href:"https://github.com/crobertsbmw",children:"Chase Roberts"})]}),Object(a.jsxs)("li",{children:["Icons made by ",Object(a.jsx)("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons",children:"Smashicons"})," from ",Object(a.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]}),Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Back"})}),Object(a.jsx)(O,{})]})};var k=function(e){var t=e.scoreBoard;return Object(a.jsxs)("div",{className:"high-scores",children:[Object(a.jsx)("h1",{children:"High Scores"}),Object(a.jsx)("div",{className:"high-score-list",children:null===t||t===[]?"no saved scores yet":t.map((function(e,t){return Object(a.jsxs)("div",{className:"high-score-list-item",children:[Object(a.jsxs)("div",{children:[t+1,". ",e.username," "]}),Object(a.jsxs)("div",{children:[e.score," "]})]})}))}),Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Back"})}),Object(a.jsx)(O,{})]})};var g=function(e){var t=e.username,n=e.changeName;return Object(a.jsxs)("div",{className:"name-input",children:[Object(a.jsx)("h1",{children:"Choose your username"}),Object(a.jsx)("input",{type:"text",name:"username",value:t,onChange:n}),Object(a.jsxs)("div",{className:"name-link-buttons",children:[Object(a.jsx)(m.b,{to:"/",children:Object(a.jsx)("button",{children:"Back"})}),Object(a.jsx)(m.b,{to:"/betselection",style:""===t?{display:"none"}:{display:"flex"},children:Object(a.jsx)("button",{children:"Confirm"})})]})]})};n(37);var P=function(e){var t=e.roundHistory;return Object(a.jsxs)("div",{className:"round-history",children:[Object(a.jsx)("h1",{children:"Round History"}),Object(a.jsx)("div",{className:"round-history-list",children:t.map((function(e){return Object(a.jsxs)("div",{className:"round-history-list-item",children:[Object(a.jsxs)("h2",{children:["Round: ",e.roundCount]}),Object(a.jsx)("div",{className:"hand",children:e.playerHand.map((function(e){return Object(a.jsx)(f,{card:e})}))}),Object(a.jsxs)("div",{children:["Player points: ",e.playerPoints]}),Object(a.jsx)("div",{className:"hand",children:e.dealerHand.map((function(e){return Object(a.jsx)(f,{card:e})}))}),Object(a.jsxs)("div",{children:["Dealer points: ",e.dealerPoints]})]})}))}),Object(a.jsx)(m.b,{to:"/game",children:Object(a.jsx)("button",{children:"Back"})})]})},H=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).resetGameState=function(){e.setState({username:"Player",bet:5,balance:1e3,stake:0,playerHand:[],playerPoints:0,dealerHand:[],dealerPoints:0,deck:"bhwcmpj3ltym",roundCount:1,endRoundPopup:"none",endGamePopup:"none",roundResult:"",roundHistory:[],scoreBoard:[]})},e.handleBetChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(d.a)({},a,s))},e.confirmBet=function(){var t=e.state,n=t.bet,a=t.balance;n>a||n<=0?alert("Bet should be positive number smaller than your balance."):e.setState((function(e){return{balance:e.balance-n,stake:2.5*n,endRoundPopup:"none",endGamePopup:"none"}}),e.shuffleCards())},e.shuffleCards=function(){fetch("https://deckofcardsapi.com/api/deck/bhwcmpj3ltym/shuffle/").then((function(e){return e.json()})).then((function(t){e.setState({deck:t.deck_id},e.dealStartingHands())}))},e.dealStartingHands=function(){e.dealCard("player"),e.dealCard("dealer"),e.dealCard("player")},e.dealCard=function(t){fetch("https://deckofcardsapi.com/api/deck/".concat(e.state.deck,"/draw/?count=1")).then((function(e){return e.json()})).then((function(n){e.setState((function(e){var a=0;return"ACE"===n.cards[0].value?a+=a+11>21?1:11:"KING"===n.cards[0].value||"QUEEN"===n.cards[0].value||"JACK"===n.cards[0].value?a+=10:a+=Number(n.cards[0].value),"player"===t?{playerHand:[].concat(Object(l.a)(e.playerHand),[n.cards[0].image]),playerPoints:e.playerPoints+a}:{dealerHand:[].concat(Object(l.a)(e.dealerHand),[n.cards[0].image]),dealerPoints:e.dealerPoints+a}}))}))},e.handleHit=function(){e.dealCard("player")},e.handleDoubleDown=function(){e.dealCard("player"),e.setState((function(e){return{bet:2*e.bet,balance:e.balance-e.bet,stake:5*e.bet}}),e.dealerDraw())},e.dealerDraw=function(){e.state.playerPoints>21?e.roundEnd():fetch("https://deckofcardsapi.com/api/deck/".concat(e.state.deck,"/draw/?count=1")).then((function(e){return e.json()})).then((function(t){e.setState((function(n){var a=0;return"ACE"===t.cards[0].value?e.state.dealerPoints+11>21?a+=1:a+=11:"KING"===t.cards[0].value||"QUEEN"===t.cards[0].value||"JACK"===t.cards[0].value?a+=10:a+=Number(t.cards[0].value),{dealerHand:[].concat(Object(l.a)(n.dealerHand),[t.cards[0].image]),dealerPoints:n.dealerPoints+a}}),e.countDealerPoints())}))},e.countDealerPoints=function(){setTimeout((function(){e.state.dealerPoints<17&&e.state.dealerPoints<=e.state.playerPoints?e.dealerDraw():e.roundEnd()}),1e3)},e.roundEnd=function(){var t=e.state,n=t.playerPoints,a=t.dealerPoints;e.saveRoundHistory(),e.setState((function(t){var s;return 5===t.roundCount&&e.gameEnd(),n>a&&n<22||a>21?(s="won",{balance:t.balance+t.stake,endRoundPopup:"flex",roundResult:s}):n===a?(s="drew",{balance:t.balance+Number(t.bet),endRoundPopup:"flex",roundResult:s}):(s="lost",0===e.state.balance&&e.gameEnd(),{endRoundPopup:"flex",roundResult:s})}))},e.saveRoundHistory=function(){e.setState((function(t){return{roundHistory:[].concat(Object(l.a)(t.roundHistory),[{roundCount:e.state.roundCount,playerHand:e.state.playerHand,playerPoints:e.state.playerPoints,dealerHand:e.state.dealerHand,dealerPoints:e.state.dealerPoints}])}}))},e.nextRound=function(){e.setState((function(e){return{playerHand:[],playerPoints:0,dealerHand:[],dealerPoints:0,roundCount:e.roundCount+1,endRoundPopup:"none"}}))},e.gameEnd=function(){e.setState({endGamePopup:"flex"})},e.saveGame=function(){var t=localStorage.getItem("saves");null===(t=JSON.parse(t))?t=[{username:e.state.username,balance:e.state.balance,round:e.state.roundCount}]:t.push({username:e.state.username,balance:e.state.balance,round:e.state.roundCount}),localStorage.setItem("saves",JSON.stringify(t))},e.loadSaves=function(){var t=localStorage.getItem("saves");t=JSON.parse(t),e.setState({saves:t})},e.loadChosenSave=function(t){var n=Object(l.a)(e.state.saves);n.splice(t,1),localStorage.setItem("saves",JSON.stringify(n)),e.setState((function(e){return{username:e.saves[t].username,balance:e.saves[t].balance,roundCount:e.saves[t].round}}))},e.saveGameScore=function(){var t=localStorage.getItem("scores");if(t=JSON.parse(t),console.log(t),null===t)t=[{username:e.state.username,score:e.state.balance}];else{t.push({username:e.state.username,score:e.state.balance}),t.sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:0})),localStorage.setItem("scores",JSON.stringify(t))}localStorage.setItem("scores",JSON.stringify(t))},e.loadScoreboard=function(){var t=localStorage.getItem("scores");t=JSON.parse(t),e.setState({scoreBoard:t})},e.state={username:"Player",bet:5,balance:1e3,stake:0,playerHand:[],playerPoints:0,dealerHand:[],dealerPoints:0,deck:"bhwcmpj3ltym",roundCount:1,endRoundPopup:"none",endGamePopup:"none",roundResult:"",roundHistory:[],scoreBoard:[],saves:[]},e.shuffleCards=e.shuffleCards.bind(Object(j.a)(e)),e.dealStartingHands=e.dealStartingHands.bind(Object(j.a)(e)),e.confirmBet=e.confirmBet.bind(Object(j.a)(e)),e.handleBetChange=e.handleBetChange.bind(Object(j.a)(e)),e.dealCard=e.dealCard.bind(Object(j.a)(e)),e}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){this.saveGame()}},{key:"render",value:function(){var e=this.saveGame,t=this.nextRound,n=this.resetGameState,s=this.dealStartingHands,c=this.handleBetChange,r=this.confirmBet,o=this.handleHit,l=this.loadChosenSave,d=this.handleDoubleDown,i=this.dealerDraw,u=this.loadSaves,j=this.loadScoreboard,b=this.saveGameScore,h=this.state,O=h.endGamePopup,f=h.endRoundPopup,H=h.username,w=h.bet,R=h.balance,B=h.stake,G=h.playerHand,D=h.playerPoints,I=h.dealerHand,E=h.dealerPoints,J=h.roundCount,A=h.roundResult,Q=h.roundHistory,$=h.scoreBoard,K=h.saves;return Object(a.jsxs)(m.a,{children:[Object(a.jsx)(x.a,{exact:!0,path:"/",render:function(){return Object(a.jsx)(p,{resetGameState:n,loadSaves:u,loadScoreboard:j})}}),Object(a.jsx)(x.a,{exact:!0,path:"/username",render:function(){return Object(a.jsx)(g,{changeName:c,username:H})}}),Object(a.jsx)(x.a,{exact:!0,path:"/betselection",render:function(){return Object(a.jsx)(v,{changeBet:c,bet:w,balance:R,confirmBet:r,saveGame:e,roundCount:J})}}),Object(a.jsx)(x.a,{exact:!0,path:"/game",render:function(){return Object(a.jsx)(y,{bet:w,stake:B,balance:R,username:H,playerPoints:D,playerHand:G,dealerPoints:E,dealerHand:I,dealStartingHands:s,hit:o,doubledown:d,stand:i,roundCount:J,endRoundPopup:f,endGamePopup:O,nextRound:t,saveGame:e,roundResult:A,roundHistory:Q,saveGameScore:b,resetGameState:n})}}),Object(a.jsx)(x.a,{exact:!0,path:"/roundhistory",render:function(){return Object(a.jsx)(P,{roundHistory:Q})}}),Object(a.jsx)(x.a,{exact:!0,path:"/highscores",render:function(){return Object(a.jsx)(k,{scoreBoard:$})}}),Object(a.jsx)(x.a,{exact:!0,path:"/rules",render:function(){return Object(a.jsx)(C,{})}}),Object(a.jsx)(x.a,{exact:!0,path:"/credits",render:function(){return Object(a.jsx)(S,{})}}),Object(a.jsx)(x.a,{exact:!0,path:"/loadgame",render:function(){return Object(a.jsx)(N,{saves:K,loadChosenSave:l})}})]})}}]),n}(c.a.Component);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.99854cc9.chunk.js.map